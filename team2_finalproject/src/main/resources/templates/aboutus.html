<meta charset="utf-8">
    <style>
	#map{
		width:400%;
		height:400px; 
		border:1px solid black; 
	}
	</style>
	<script>
	var lat = 37.5276891;
	var lng = 127.051432;
	var map;
	
	function display(lat,lng){
		var mapContainer = document.querySelector('#map');
		var mapOption = { 
		        center: new kakao.maps.LatLng(lat, lng), // 지도의 중심좌표
		        level: 7 // 지도의 확대 레벨
		    };
		map = new kakao.maps.Map(mapContainer, mapOption); 
	
		var mapTypeControl = new kakao.maps.MapTypeControl();
		map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);
		var zoomControl = new kakao.maps.ZoomControl();
		map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
		
		
	};
	
	
	function displaymarker(data){
		var imageSrc = "/img/mk.png";  //어떤 이미지를 올릴 것인가?
	    var imageSize = new kakao.maps.Size(24, 35);    
	    var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 
		
		for(var i=0; i<data.length; i++){
			 var marker = new kakao.maps.Marker({  //여기다가 이미지를 집어넣자
		        map: map,
		        position: new kakao.maps.LatLng(data[i].lat, data[i].lng),
		        image : markerImage //Prohibit commiting comma
			 });
			 
			 var iwContent = '<h3>'+data[i].title+'</h3>';
			 iwContent += '<img width = "50px" src = "/img/map.jpg"'
		     var iwPosition = new kakao.maps.LatLng(data[i].lat, data[i].lng);
	
			 var infowindow = new kakao.maps.InfoWindow({
			     position : iwPosition, 
			     content : iwContent
			 });
			 kakao.maps.event.addListener(marker, 'mouseover', mouseoverListener(marker, infowindow));
			 kakao.maps.event.addListener(marker, 'mouseout', mouseoutListener(marker, infowindow));
			 kakao.maps.event.addListener(marker, 'click', mouseclickListener(data[i].target));
		};
		
		function mouseoverListener(marker, infowindow) {
			return function(){
				infowindow.open(map, marker);
			};
		}
		function mouseoutListener(marker, infowindow) {
			return function(){
				infowindow.close();
			};
		}
		function mouseclickListener(target) {
		  	return function(){
		  		location.href = target;
		  	};
		}
	}
	
	
	function getdata(loc){
		$.ajax({
			url : '/getmarker2',
			data : {'loc' : loc},
			success : function(data){
				displaymarker(data);
			}
		});
	};
	
	
	function go(lat,lng,loc){
		var moveLatLon = new kakao.maps.LatLng(lat,lng);
	    map.panTo(moveLatLon);      /* 지도가 이동했으면 데이터를 가져와야됨 */ 
	    getdata(loc);                 //marker information request
	};
	
	$(document).ready(function(){
		display(lat,lng);
		$('#s').click(function(){
			go(37.5527401,126.9930781,'s');
		});
		$('#b').click(function(){
			go(35.1223984,129.0896448,'b');
		});
		$('#j').click(function(){
			go(33.5199183,126.6142571,'j');
		});
	});
	</script>
    <div class="site-section border-bottom" data-aos="fade">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md-6">
            <div class="block-16">
              <figure>
                <img src="images/blog_1.jpg" alt="Image placeholder" class="img-fluid rounded">
                <a href="https://vimeo.com/channels/staffpicks/93951774" class="play-button popup-vimeo"><span class="ion-md-play"></span></a>

              </figure>
            </div>
          </div>
          <div class="col-md-1"></div>
          <div class="col-md-5">
            
            
            <div class="site-section-heading pt-3 mb-4">
              <h2 class="text-black">How We Started</h2>
            </div>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius repellat, dicta at laboriosam, nemo exercitationem itaque eveniet architecto cumque, deleniti commodi molestias repellendus quos sequi hic fugiat asperiores illum. Atque, in, fuga excepturi corrupti error corporis aliquam unde nostrum quas.</p>
            <p>Accusantium dolor ratione maiores est deleniti nihil? Dignissimos est, sunt nulla illum autem in, quibusdam cumque recusandae, laudantium minima repellendus.</p>
            
          </div>
        </div>
      </div>
    </div>

    <div class="site-section border-bottom" data-aos="fade">
      <div class="container">
        <div class="row justify-content-center mb-5">
          <div class="col-md-7 site-section-heading text-center pt-4">
            <a><strong>About Us</strong></a>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 col-lg-3">
  
            <div class="block-38 text-center">
              <div class="block-38-img">
                <div class="block-38-header">
                  <div id ="map"></div> 
              </div>
            </div>
          </div>
   
        </div>
      </div>
    </div>
  
  </body>
</html>